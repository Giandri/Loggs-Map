                  <div className="flex-1">
                    <p className="text-sm text-gray-600">Upload logo baru (maksimal 2MB)</p>
                    {editLogoFile && (
                      <p className="text-xs text-green-600 mt-1">
                        ‚úì {editLogoFile.name} ({(editLogoFile.size / 1024 / 1024).toFixed(2)} MB)
                      </p>
                    )}
                    {!editLogoFile && editLogoPreview && <p className="text-xs text-blue-600 mt-1">Logo saat ini akan dipertahankan</p>}
                  </div>
                </div>
              </div>

              {/* Edit Photos */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1.5">Foto Coffee Shop</label>

                {/* Current Photos + New Photos */}
                {editPhotoPreviews.length > 0 && (
                  <div className="mb-4">
                    <p className="text-xs text-gray-500 mb-2">Foto saat ini:</p>
                    <div className="grid grid-cols-2 gap-2">
                      {editPhotoPreviews.map((preview, index) => {
                        const isExistingPhoto = selectedCoffeeShop?.photos?.includes(preview);
                        const isMarkedForDeletion = photosToDelete.includes(preview);

                        return (
                          <div key={index} className={`relative group ${isMarkedForDeletion ? "opacity-50" : ""}`}>
                            <div className="aspect-square bg-gray-100 rounded-md overflow-hidden border border-gray-200">
                              <img src={preview} alt={`Preview ${index + 1}`} className="w-full h-full object-cover" />
                              {isMarkedForDeletion && (
                                <div className="absolute inset-0 bg-red-500/20 flex items-center justify-center">
                                  <span className="text-red-600 text-xs font-medium">Akan Dihapus</span>
                                </div>
                              )}
                              <button
                                type="button"
                                onClick={() => removeEditPhoto(index, isExistingPhoto, preview)}
                                className="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600">
                                <X size={14} />
                              </button>
                            </div>
                            {isExistingPhoto && !isMarkedForDeletion && <div className="absolute bottom-1 left-1 bg-blue-500 text-white text-xs px-1.5 py-0.5 rounded">Lama</div>}
                            {!isExistingPhoto && <div className="absolute bottom-1 left-1 bg-green-500 text-white text-xs px-1.5 py-0.5 rounded">Baru</div>}
                          </div>
                        );
                      })}
                    </div>
                  </div>
                )}

                {/* Upload Area */}
                <div className="relative">
                  <input type="file" multiple accept="image/*" onChange={(e) => handleEditPhotoUpload(e.target.files)} className="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" />
                  <div className="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center transition-all hover:border-gray-400 bg-gray-50">
                    <Camera className="w-8 h-8 mx-auto mb-2 text-gray-400" />
                    <p className="text-sm text-gray-600">Klik untuk upload foto baru</p>
                    <p className="text-xs text-gray-500 mt-1">Maksimal 5 foto ‚Ä¢ JPG, PNG, WebP</p>
                  </div>
                </div>

                {/* Photo Counter */}
                {editPhotoPreviews.length > 0 && (
                  <div className="mt-3 text-xs text-center">
                    <div className="text-gray-500">
                      {editPhotoPreviews.length} dari 5 foto
                      {photosToDelete.length > 0 && ` (${photosToDelete.length} akan dihapus)`}
                    </div>
                    {editPhotoFiles.some((file) => file.isNew) && <div className="text-green-600 mt-1">‚ö†Ô∏è Foto baru akan ditambahkan</div>}
                  </div>
                )}
              </div>

              {/* Parking Options */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Parkir</label>
                <div className="flex flex-wrap gap-3">
                  {[
                    { value: "motorcycle", label: "üèçÔ∏è Motor" },
                    { value: "car", label: "üöó Mobil" },
                    { value: "bicycle", label: "üö≤ Sepeda" },
                  ].map((option) => (
                    <label key={option.value} className="flex items-center gap-2 cursor-pointer">
                      <input
                        type="checkbox"
                        checked={editFormData.parking.includes(option.value)}
                        onChange={() => handleCheckboxArrayChange("parking", option.value)}
                        className="w-4 h-4 text-emerald-500 border-gray-300 rounded focus:ring-emerald-500"
                      />
                      <span className="text-sm text-gray-700">{option.label}</span>
                    </label>
                  ))}
                </div>
              </div>

              {/* Payment Methods */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Metode Pembayaran</label>
                <div className="flex flex-wrap gap-3">
                  {[
                    { value: "cash", label: "üíµ Cash" },
                    { value: "cashless", label: "üí≥ Cashless" },
                  ].map((option) => (
                    <label key={option.value} className="flex items-center gap-2 cursor-pointer">
                      <input
                        type="checkbox"
                        checked={editFormData.paymentMethods.includes(option.value)}
                        onChange={() => handleCheckboxArrayChange("paymentMethods", option.value)}
                        className="w-4 h-4 text-emerald-500 border-gray-300 rounded focus:ring-emerald-500"
                      />
                      <span className="text-sm text-gray-700">{option.label}</span>
                    </label>
                  ))}
                </div>
              </div>

              {/* Facilities */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Fasilitas</label>
                <div className="flex flex-wrap gap-3">
                  {[
                    { value: "wifi", label: "üì∂ WiFi" },
                    { value: "ac", label: "‚ùÑÔ∏è AC" },
                    { value: "smoking-area", label: "üö¨ Smoking Area" },
                    { value: "outdoor", label: "üå≥ Outdoor" },
                    { value: "indoor", label: "üè† Indoor" },
                    { value: "meeting-room", label: "üè¢ Meeting Room" },
                    { value: "toilet", label: "üöª Toilet" },
                    { value: "charging", label: "üîå Charging" },
                    { value: "pet-friendly", label: "üêï Pet Friendly" },
                    { value: "live-music", label: "üéµ Live Music" },
                    { value: "board-games", label: "üé≤ Board Games" },
                    { value: "projector", label: "üìΩÔ∏è Projector" },
                  ].map((option) => (
                    <label key={option.value} className="flex items-center gap-2 cursor-pointer">
                      <input
                        type="checkbox"
                        checked={editFormData.facilities.includes(option.value)}
                        onChange={() => handleCheckboxArrayChange("facilities", option.value)}
                        className="w-4 h-4 text-emerald-500 border-gray-300 rounded focus:ring-emerald-500"
                      />
                      <span className="text-sm text-gray-700">{option.label}</span>
                    </label>
                  ))}
                </div>
              </div>

              {/* Toggles */}
              <div className="space-y-3">
                {/* WFC Toggle */}
                <div className="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                  <div>
                    <p className="text-sm font-medium text-gray-700">Work From Cafe</p>
                    <p className="text-xs text-gray-500">Cocok untuk bekerja remote</p>
                  </div>
                  <label className="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" name="wfc" checked={editFormData.wfc} onChange={handleEditInputChange} className="sr-only peer" />
                    <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"></div>
                  </label>
                </div>

                {/* Mushola Toggle */}
                <div className="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                  <div>
                    <p className="text-sm font-medium text-gray-700">Mushola</p>
                    <p className="text-xs text-gray-500">Tersedia tempat sholat</p>
                  </div>
                  <label className="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" name="mushola" checked={editFormData.mushola} onChange={handleEditInputChange} className="sr-only peer" />
                    <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"></div>
                  </label>
                </div>
              </div>


      {/* File Manager Drawer */}
      {showFileManager && (
        <>
          {/* Backdrop */}
          <div className="fixed inset-0 bg-black/50 z-50 transition-opacity" onClick={() => setShowFileManager(false)} />

          {/* Drawer */}
          <div className="fixed right-0 top-0 h-full w-[500px] bg-white z-50 shadow-2xl overflow-y-auto animate-slide-in-right">
            {/* Header */}
            <div className="sticky top-0 bg-white border-b border-gray-100 px-6 py-4 flex items-center justify-between">
              <h3 className="text-lg font-semibold text-gray-900">File Manager</h3>
              <button onClick={() => setShowFileManager(false)} className="p-2 hover:bg-gray-100 rounded-lg transition">
                <X className="w-5 h-5 text-gray-500" />
              </button>
            </div>

            {/* Content */}
            <div className="p-6">
              <div className="mb-4 flex items-center justify-between">
                <p className="text-sm text-gray-600">Kelola file yang sudah diupload ke Vercel Blob</p>
                <button onClick={loadUploadedFiles} disabled={isLoadingFiles} className="px-3 py-1.5 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition disabled:opacity-50 flex items-center gap-2">
                  {isLoadingFiles ? <Loader2 className="w-4 h-4 animate-spin" /> : <Eye className="w-4 h-4" />}
                  Refresh
                </button>
              </div>

              {isLoadingFiles ? (
                <div className="flex items-center justify-center py-12">
                  <Loader2 className="w-8 h-8 animate-spin text-gray-400" />
                  <span className="ml-3 text-gray-600">Loading files...</span>
                </div>
              ) : uploadedFiles.length === 0 ? (
                <div className="text-center py-12">
                  <Eye className="w-12 h-12 text-gray-300 mx-auto mb-4" />
                  <p className="text-gray-500">Belum ada file yang diupload</p>
                </div>
              ) : (
                <div className="space-y-3">
                  {uploadedFiles.map((file, index) => (
                    <div key={index} className="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition">
                      <div className="flex items-start justify-between">
                        <div className="flex-1 min-w-0">
                          <div className="flex items-center gap-3 mb-2">
                            {file.url.includes(".jpg") || file.url.includes(".jpeg") || file.url.includes(".png") || file.url.includes(".webp") ? (
                              <div className="w-10 h-10 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center">
                                <img
                                  src={file.url}
                                  alt={file.name}
                                  className="w-full h-full object-cover"
                                  onError={(e) => {
                                    const target = e.target as HTMLImageElement;
                                    target.src = "/api/placeholder/40/40?text=IMG";
                                  }}
                                />
                              </div>
                            ) : (
                              <div className="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center">
                                <span className="text-xs text-gray-500">üìÑ</span>
                              </div>
                            )}
                            <div className="min-w-0 flex-1">
                              <p className="text-sm font-medium text-gray-900 truncate">{file.name}</p>
                              <p className="text-xs text-gray-500">
                                {(file.size / 1024 / 1024).toFixed(2)} MB ‚Ä¢ {new Date(file.uploadedAt).toLocaleDateString()}
                              </p>
                            </div>
                          </div>
                          <div className="flex items-center gap-2">
                            <a href={file.url} target="_blank" rel="noopener noreferrer" className="text-xs text-blue-600 hover:text-blue-800 underline">
                              View
                            </a>
                            <button onClick={() => deleteFile(file.pathname, file.url)} disabled={isDeletingFile === file.pathname} className="text-xs text-red-600 hover:text-red-800 underline disabled:opacity-50 flex items-center gap-1">
                              {isDeletingFile === file.pathname ? <Loader2 className="w-3 h-3 animate-spin" /> : <Trash2 className="w-3 h-3" />}
                              Delete
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>
          </div>
        </>
      )}

      {/* Dashboard Overlay - muncul setelah login */}
      {isAuthenticated && (
        <>
